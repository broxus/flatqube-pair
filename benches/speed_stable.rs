use std::{collections::HashMap, str::FromStr};

use anyhow::Result;
use criterion::{black_box, criterion_group, criterion_main, Criterion};
use malachite_base::num::basic::traits::{One, Zero};
use malachite_nz::natural::Natural;
use nekoton::transport::models::ExistingContract;
use nekoton_abi::{FunctionExt, PackAbiPlain, UnpackAbi, UnpackAbiPlain};
use nekoton_utils::TrustMe;
use ton_block::MsgAddressInt;
use tonswap_pair::{
    normal_pair::{Direction, Pair},
    stable_pair::{AmplificationCoefficient, FeeParams, StablePair, TokenDataInput},
    utils::{mul_divc, mul_divc_dec, mul_divc_mal, mul_divc_native},
};

fn criterion_benchmark(c: &mut Criterion) {
    let token_data = vec![
        TokenDataInput {
            decimals: 9,
            balance: 5530869000000000,
        },
        TokenDataInput {
            decimals: 18,
            balance: 5514989303312229845534954,
        },
    ];

    let token_index = HashMap::from([([0; 32], 0), ([1; 32], 1)]);
    let pair = StablePair::new(
        token_data,
        token_index,
        AmplificationCoefficient {
            value: Natural::from(85u32),
            precision: Natural::ONE,
        },
        FeeParams {
            denominator: Natural::from(1000000u32),
            pool_numerator: Natural::from(3000u64),
            beneficiary_numerator: Natural::ZERO,
        },
    )
    .unwrap();

    let contract: ExistingContract = serde_json::from_str(STATE).unwrap();
    let contract_pair = DexPair { inner: contract };
    let address = MsgAddressInt::from_str(
        "0:58031386969e5694e6db4373c5901e2a832fec253a6d7295a074dd810d272910",
    )
    .unwrap();

    c.bench_function("native stable", |b| {
        b.iter(|| {
            pair.expected_exchange(black_box(123123123123123), &[0; 32])
                .unwrap()
        })
    })
    .bench_function("contract", |b| {
        b.iter(|| {
            contract_pair
                .expected_exchange(black_box(123123123123123), address.clone())
                .unwrap()
        })
    });
}

pub struct DexPair {
    pub inner: ExistingContract,
}

const STATE: &'static str = r#"{"account":"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","lastTransactionId":{"hash":"9e44bd0f705c0f90644da65f2e41d1576e9c0c7874ae0a0d38c270756850084c","isExact":true,"lt":"27331751000001"},"timings":{"genLt":"0","genUtime":0},"type":"exists"}"#;

impl DexPair {
    pub fn expected_exchange(
        &self,
        amount: u128,
        spent_token_root: MsgAddressInt,
    ) -> Result<ExpectedExchangeOutput> {
        #[derive(PackAbiPlain, Debug)]
        struct ExpectedExchangeInput {
            #[abi(name = "answerId")]
            _answer_id: u32,
            #[abi]
            amount: u128,
            #[abi]
            spent_token_root: MsgAddressInt,
        }

        let contract = include_str!("dexPairv3.json");
        let contract = ton_abi::Contract::load(contract)?;
        let fun = contract.function("expectedExchange").trust_me();
        let tokens = ExpectedExchangeInput {
            _answer_id: 0,
            amount,
            spent_token_root,
        }
        .pack();
        let tokens = fun.run_local(
            &nekoton_utils::SimpleClock,
            self.inner.account.clone(),
            &tokens,
        )?;
        let tokens = tokens.tokens.unwrap();

        Ok(tokens.unpack()?)
    }
}

#[derive(UnpackAbiPlain, Debug)]
pub struct ExpectedExchangeOutput {
    #[abi]
    pub expected_amount: u128,
    #[abi]
    pub expected_fee: u128,
}

criterion_group!(benches, criterion_benchmark);
criterion_main!(benches);
